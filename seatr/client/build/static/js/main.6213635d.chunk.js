(this.webpackJsonpseatr=this.webpackJsonpseatr||[]).push([[0],{140:function(e,t,n){},141:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),i=n.n(r),s=(n(140),n(141),n(123)),o=n(245),l=n(48),j=n(21),u=n(13),d=n(10),b=n(5),h=n(247),O=n(3),m=c.a.createContext([{},function(){}]),x=function(e){var t=e.children,n=Object(h.a)(["user"]),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(r.user),o=Object(d.a)(s,2),l=o[0],j=o[1];return Object(a.useEffect)((function(){i("user",l)}),[l]),Object(O.jsx)(m.Provider,{value:[l,j],children:t})};function f(e){var t=e.component,n=Object(b.a)(e,["component"]),c=Object(j.h)(),r=Object(a.useContext)(m),i=Object(d.a)(r,1)[0];return console.log("authentification details:",i),Object(O.jsx)(j.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return i&&"undefined"!==i?Object(O.jsx)(t,Object(u.a)({},e)):Object(O.jsx)(j.a,{to:{pathname:"/login",state:{prevPath:c.pathname}}})}}))}var p=n(226),v=n(230),g=n(231),y=n(232),C=n(190);function N(){return Object(O.jsx)("img",{className:"logo",alt:"company logo",src:"logo.svg"})}function w(e){var t=e.setGoToLogin,n=function(){t(!0)};return Object(O.jsx)(p.a,{children:Object(O.jsxs)("div",{className:"center-children p-t-5",children:[Object(O.jsx)(N,{}),Object(O.jsx)(v.a,{className:"w-20 m-b-2 center-text",children:Object(O.jsx)(g.a,{onClick:n,children:Object(O.jsx)(y.a,{children:Object(O.jsx)(C.a,{children:"Sign in with phone number"})})})}),Object(O.jsx)(C.a,{className:"bold italic cursor-pointer",onClick:n,children:"New here? Create an account!"})]})})}var S={apiKey:"AIzaSyDb5mCjlEnbtmMSypfM0azSsOpJeE4qckM",authDomain:"seatr-2adb4.firebaseapp.com",projectId:"seatr-2adb4",storageBucket:"seatr-2adb4.appspot.com",messagingSenderId:"667303864305",appId:"1:667303864305:web:eef82e4d6abb54499e0650",measurementId:"G-BS6L38PJCX"},k=n(97),I=(n(157),n(64));function D(e){var t=e.setIsNewUser,n=Object(a.useContext)(m),c=Object(d.a)(n,2)[1];return Object(a.useEffect)((function(){I.a.apps.length?I.a.app():I.a.initializeApp(S);var e={callbacks:{signInSuccessWithAuthResult:function(e){var n=e.user,a=e.additionalUserInfo.isNewUser;return t(a),c({phoneNumber:n.phoneNumber,uid:n.uid}),!1},uiShown:function(){document.querySelectorAll("#firebaseui-auth-container")[0].style.paddingTop="5rem",document.querySelectorAll(".firebaseui-card-header")[0].className="",document.querySelectorAll(".firebaseui-title")[0].style.textAlign="center",document.querySelectorAll(".firebaseui-container")[0].style.backgroundColor="transparent",document.querySelectorAll(".firebaseui-container")[0].classList.remove("mdl-shadow--2dp"),document.querySelectorAll(".firebaseui-card-footer")[0].style.display="none"}},signInOptions:[{provider:I.a.auth.PhoneAuthProvider.PROVIDER_ID,defaultCountry:"RO"}]};(k.a.AuthUI.getInstance()||new k.a.AuthUI(I.a.auth())).start("#firebaseui-auth-container",e)}),[t,c]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{id:"firebaseui-auth-container"})})}var E=n(249),A=n(235),R=n(59);function P(e){var t=e.setIsNewUser,n=Object(a.useState)(),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(a.useContext)(m),o=Object(d.a)(s,2)[1],l=function(e){var t=e.currentTarget.textContent,n=document.getElementsByClassName("list-element-selected")[0],a=document.getElementById(t);n&&(n.className="list-element"),a.className="list-element-selected",i(t)},j=Object(R.a)({initialValues:{name:"",surname:""},onSubmit:function(e){o((function(t){return{phoneNumber:t.phoneNumber,uid:t.uid,name:e.name,surname:e.surname,gender:r}})),t(!1)}});return Object(O.jsxs)(p.a,{className:"m-t-5",children:[Object(O.jsx)(C.a,{className:"center-text",variant:"h5",children:"Tell us about you.."}),Object(O.jsxs)("form",{onSubmit:j.handleSubmit,className:"flex-column center-children",children:[Object(O.jsx)("div",{className:"m-t-2 w-20",children:Object(O.jsx)(E.a,{name:"name",label:"name",variant:"outlined",onChange:j.handleChange,className:"w-100p"})}),Object(O.jsx)("div",{className:"m-t-1 w-20",children:Object(O.jsx)(E.a,{name:"surname",label:"surname",variant:"outlined",onChange:j.handleChange,className:"w-100p"})}),Object(O.jsxs)("div",{className:"flex gap-1 m-t-2",id:"category",children:[Object(O.jsx)("div",{className:"list-element",id:"Man",onClick:l,children:Object(O.jsx)(C.a,{align:"center",children:"Man"})}),Object(O.jsx)("div",{className:"list-element",id:"Woman",onClick:l,children:Object(O.jsx)(C.a,{align:"center",children:"Woman"})}),Object(O.jsx)("div",{className:"list-element",id:"Other",onClick:l,children:Object(O.jsx)(C.a,{align:"center",children:"Other"})})]}),Object(O.jsx)("br",{}),Object(O.jsx)(A.a,{type:"submit",children:"Next"})]})]})}function T(){var e=Object(j.h)(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(d.a)(i,2),o=s[0],l=s[1],u=Object(a.useContext)(m),b=Object(d.a)(u,1)[0];return c?o?Object(O.jsx)(P,{setIsNewUser:l}):b&&"undefined"!==b?Object(O.jsx)(j.a,{to:{pathname:e.state?e.state.prevPath:"/"}}):Object(O.jsx)(D,{setIsNewUser:l}):Object(O.jsx)(w,{setGoToLogin:r})}var q=n(236);var H=function(){var e=Object(j.g)();return Object(O.jsx)(q.a,{position:"static",color:"primary",onClick:function(){e.push("/")},children:Object(O.jsx)("img",{className:"w-5 h-5 p-l-2",alt:"company logo",src:"logo_white.svg"})})},_=n(28),M=n(127),L=n(129),U=n(237),V=n(238);function F(e){var t=e.logoHref;return Object(O.jsx)("div",{className:"restaurant-card__logo",children:Object(O.jsx)("img",{className:"w-5 h-5 cover round border-white",alt:"company logo",src:t})})}function W(e){var t=e.backgroundHref;return Object(O.jsx)("img",{className:"w-100p h-5 cover",alt:"company background",src:t})}function B(e){var t=e.name,n=e.description;return Object(O.jsxs)("div",{className:"p-1 secondary white",children:[Object(O.jsx)("br",{}),Object(O.jsx)(C.a,{variant:"h6",children:t}),Object(O.jsxs)(C.a,{variant:"body2",children:[null===n||void 0===n?void 0:n.substring(0,200),"..."]})]})}var z=n(257),Y=n(115),G=n.n(Y),J=n(116),$=n.n(J);function K(e){var t=e.priceRange,n=e.starRating,a=e.distance;return Object(O.jsxs)(M.a,{className:"restaurant-card__footer",children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"flex center",children:[Object(O.jsx)(G.a,{}),Object(O.jsx)(C.a,{style:{fontWeight:600},children:"".concat(null!==a&&void 0!==a?a:"??"," min")})]}),Object(O.jsx)("div",{className:"flex center",children:Object(O.jsx)(z.a,{icon:Object(O.jsx)($.a,{}),name:"half-rating-read",max:3,defaultValue:t,precision:1,readOnly:!0})})]}),Object(O.jsx)("div",{className:"flex center",children:Object(O.jsx)(z.a,{name:"half-rating-read",max:5,defaultValue:n,precision:.5,readOnly:!0})})]})}var Q=function(e){var t=e.priceRange,n=e.name,a=e.description,c=e.logoHref,r=e.backgroundHref,i=e.menu,s=e.distance,o=e.rating,l=Object(j.g)(),u=function(){l.push({pathname:"/restaurant",search:"?name=".concat(n),state:{priceRange:t,name:n,description:a,logoHref:c,backgroundHref:r,menu:i,distance:s,rating:o}})};return Object(O.jsxs)("div",{className:"restaurant-card",children:[Object(O.jsx)("div",{onClick:u,children:Object(O.jsx)(F,{logoHref:c})}),Object(O.jsx)("div",{onClick:u,children:Object(O.jsx)(W,{backgroundHref:r})}),Object(O.jsxs)(M.a,{className:"flex-column",children:[Object(O.jsx)("div",{onClick:u,children:Object(O.jsx)(B,{name:n,description:a})}),Object(O.jsx)(K,{priceRange:t,starRating:o,distance:s})]})]})},X=n(250);function Z(e){var t=e.restaurants;return Object(O.jsx)("div",{className:"center-children",children:t.map((function(e){return Object(O.jsx)(Q,{name:e.name,description:e.description,backgroundHref:e.backgroundHref,logoHref:e.logoHref,menu:e.menu,distance:e.distance,priceRange:e.priceRange,rating:e.rating},Object(X.a)())}))})}var ee=n(26),te=n.n(ee),ne=n(124),ae=(n(177),n(117)),ce=n.n(ae);n(178);var re=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(d.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(""),j=Object(d.a)(l,2),u=j[0],b=j[1],h=Object(a.useState)(!1),m=Object(d.a)(h,2),x=m[0],f=m[1],p=Object(a.useState)(!1),v=Object(d.a)(p,2),g=v[0],y=v[1];Object(a.useEffect)((function(){o(n)}),[n]),Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;te.a.get("/api/restaurant?lat=".concat(t.latitude,"&lng=").concat(t.longitude),{withCredentials:!0}).then((function(e){var t=e.data;console.log(t),c(t)})).catch((function(e){console.log(e)}))}))}),[]);var C=function(){var e=n.filter((function(e){return e.name.includes(u)||e.tags.some((function(e){return e.includes(u)}))}));g&&(e=e.filter((function(e){return e.currentAvailableSeats>.3*e.maxSeatCount}))),o(e)};return Object(a.useEffect)((function(){C()}),[C,g]),Object(O.jsxs)("div",{className:"home-page",children:[Object(O.jsxs)(M.a,{className:"home-page_search",children:[Object(O.jsx)(L.a,{onChange:function(e){var t=e.target.value;b(t),C()},fullWidth:!0}),Object(O.jsx)("div",{className:"w-2",onClick:C,children:Object(O.jsx)(U.a,{})}),Object(O.jsx)("div",{className:"w-2",onClick:function(){return f((function(e){return!e}))},children:Object(O.jsx)(V.a,{})})]}),x&&Object(O.jsxs)(M.a,{className:"home-page_filter",children:[Object(O.jsx)(ce.a,{options:["distance","rating","price"],value:"distance",onChange:function(e){var t=e.value,a=Object(_.a)(n);switch(t){case"distance":a.sort((function(e,t){return e.distance&&t.distance&&e.distance>t.distance?1:-1}));break;case"rating":a.sort((function(e,t){return e.rating<t.rating?1:-1}));break;case"price":a.sort((function(e,t){return e.priceRange>t.priceRange?1:-1}));break;default:throw new Error("invalid sort by value")}c(a)}}),Object(O.jsx)(ne.a,{color:"success",onChange:function(){y((function(e){return!e}))},children:"Covid"})]}),Object(O.jsx)(Z,{restaurants:s})]})},ie=function(){var e=Object(a.useContext)(m),t=Object(d.a)(e,2),n=t[0];t[1],n.uid,n.phoneNumber;return Object(a.useEffect)((function(){te.a.get("/api/reservation",{withCredentials:!0}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.response.data)}))}),[]),Object(O.jsx)(O.Fragment,{children:"user reservations"})},se=n(121),oe=n.n(se),le=n(120),je=n.n(le),ue=n(87),de=n.n(ue),be=n(118),he=n(251);function Oe(e){var t=Object(R.a)({onSubmit:function(){var n=function(){var e=Object(be.a)(de.a.mark((function e(t){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Uint8Array,e.next=4,t.arrayBuffer();case 4:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.t4=[e.t3],e.t5={type:t.type},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(t.values);var a=new FormData;n(t.values.file).then((function(n){a.append("description",t.values.description),a.append("rating",String(t.values.rating)),a.append("streamfile",n),e.restaurantName&&a.append("restaurantName",e.restaurantName),te.a.post("/api/review",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.message)}))})).catch((function(n){te.a.post("/api/review",{description:t.values.description,stars:t.values.rating,restaurantName:e.restaurantName},{withCredentials:!0}).catch((function(e){console.log(e.message)}))}))},initialValues:{description:"",rating:0,file:null}});return Object(O.jsx)(he.a,{open:e.open,onClose:e.onClose,children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(C.a,{variant:"h4",children:"Review"}),Object(O.jsxs)("form",{className:"flex-column",onSubmit:t.handleSubmit,children:[Object(O.jsx)(E.a,{name:"description",label:"description",className:"m-2",value:t.values.description,onChange:t.handleChange}),Object(O.jsxs)(A.a,{variant:"contained",component:"label",className:"m-2",children:["Upload Image",Object(O.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var n;(null===e||void 0===e||null===(n=e.currentTarget)||void 0===n?void 0:n.files[0])&&t.setFieldValue("file",e.currentTarget.files[0])},className:"form-control"})]}),Object(O.jsx)(z.a,{className:"m-2",name:"half-rating-read",max:5,defaultValue:0,precision:.5,onChange:function(e){t.setFieldValue("rating",e.target.value)}}),Object(O.jsx)(A.a,{type:"submit",className:"m-2",children:Object(O.jsx)(C.a,{children:"Submit"})})]})]})})}var me=n(254),xe=n(243),fe=n(122),pe=n.n(fe),ve=n(240),ge=n(241),ye=n(242),Ce=n(252),Ne=n(239),we=n(119),Se=n.n(we),ke=function(e){var t=function(e){var t=0;return e.forEach((function(e){var n=e.item,a=e.quantity;t+=n.price*a})),t};return Object(O.jsxs)(he.a,Object(u.a)(Object(u.a)({},e.dialogProps),{},{children:[Object(O.jsx)(Ne.a,{children:"Pay for your order"}),Object(O.jsx)(C.a,{children:"You have to pay ".concat(t(e.order),"$")}),Object(O.jsx)(Se.a,{environment:"TEST",paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"example"}}}],merchantInfo:{merchantId:"12345678901234567890",merchantName:"Demo Merchant"},transactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:"".concat(t(e.order)),currencyCode:"USD",countryCode:"US"}},onLoadPaymentData:function(e){console.log("load payment data",e)}})]}))};var Ie=function(){var e=Object(j.h)(),t=Object(a.useContext)(m),n=Object(d.a)(t,1)[0],c=Object(a.useState)(),r=Object(d.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(1),l=Object(d.a)(o,2),u=l[0],b=l[1],h=Object(a.useState)(!1),x=Object(d.a)(h,2),f=x[0],g=x[1],y=Object(a.useState)(!1),N=Object(d.a)(y,2),w=N[0],S=N[1],k=Object(a.useState)([]),I=Object(d.a)(k,2),D=I[0],R=I[1],P=Object(a.useState)([]),T=Object(d.a)(P,2),q=T[0],H=T[1],_=Object(a.useState)("2017-05-24"),L=Object(d.a)(_,2),U=L[0],V=L[1];Object(a.useEffect)((function(){console.log(i),(null===i||void 0===i?void 0:i.name)&&te.a.get("/api/review",{params:{restaurantName:i.name},withCredentials:!0}).then((function(e){console.log(e);var t=e.data;R(t.reviews)})).catch((function(e){console.log(e)}))}),[i]);var F=function(){S(!0)};return Object(a.useEffect)((function(){if(e.state){s(e.state);var t=e.state;H(t.menu.map((function(e){return{item:e,quantity:0}})))}}),[e]),i?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{alt:"company background",src:i.backgroundHref,style:{width:"100%",maxHeight:"10rem"}}),Object(O.jsx)("img",{alt:"company logo",src:i.logoHref,style:{position:"relative",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"50%",borderWidth:"1rem",borderStyle:"solid",borderColor:"#DDDDDD"}})]}),Object(O.jsxs)(ve.a,{container:!0,spacing:3,style:{marginTop:"-5rem"},children:[Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(M.a,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(C.a,{variant:"h5",children:i.name}),Object(O.jsx)(C.a,{variant:"body1",children:i.description})]})})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(M.a,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(C.a,{variant:"h5",children:"Maybe preorder something"}),i.menu.map((function(e,t){return Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{variant:"h5",children:"".concat(e.name," ").concat(e.price,"$")}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)(A.a,{onClick:function(){H((function(t){return t.map((function(t,n){var a=t.item,c=t.quantity;return a.name===e.name&&c>=1?{item:a,quantity:c-1}:{item:a,quantity:c}}))}))},children:Object(O.jsx)(ge.a,{})}),Object(O.jsx)(C.a,{children:q[t].quantity}),Object(O.jsx)(A.a,{onClick:function(){H((function(t){return t.map((function(t,n){var a=t.item,c=t.quantity;return a.name===e.name?{item:a,quantity:c+1}:{item:a,quantity:c}}))}))},children:Object(O.jsx)(ye.a,{})})]})]})}))]})})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(M.a,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(C.a,{variant:"h5",children:"How many people?"}),Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsx)(A.a,{onClick:function(){b((function(e){return--e}))},children:Object(O.jsx)(je.a,{fontSize:"large"})}),Object(O.jsxs)(C.a,{variant:"h4",children:[" ",u," "]}),Object(O.jsx)(A.a,{onClick:function(){b((function(e){return++e}))},children:Object(O.jsx)(oe.a,{color:"secondary",fontSize:"large"})})]})]})})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(M.a,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(C.a,{variant:"h4",children:"When?"}),Object(O.jsx)(E.a,{id:"date",label:"Date",type:"date",value:U,onChange:function(e){V(e.target.value)},InputLabelProps:{shrink:!0}})]})})})]}),Object(O.jsx)("div",{className:"m-t-2",children:Object(O.jsx)(A.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){console.log(q);var e=!1;q.forEach((function(t,n){t.item;0!==t.quantity&&(e=!0)})),e?F():te.a.post("/api/restaurant/".concat(i.name,"/reservation"),{reservationDate:U,seatCount:u,userPhone:n.phoneNumber},{withCredentials:!0}).then((function(e){alert("created reservation successfuly")})).catch((function(e){alert(JSON.stringify(e.response.data))}))},children:Object(O.jsx)(C.a,{children:"Make a reservation"})})}),Object(O.jsx)("div",{className:"m-t-2",children:Object(O.jsx)(A.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){g(!0)},children:Object(O.jsx)(C.a,{children:"add review"})})}),Object(O.jsxs)(Ce.a,{children:[Object(O.jsx)(me.a,{expandIcon:Object(O.jsx)(pe.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(O.jsx)(C.a,{variant:"h5",children:"Reviews"})}),Object(O.jsx)(xe.a,{children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:D.map((function(e){return Object(O.jsx)("div",{style:{width:"100%"},children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)("div",{children:e.description}),Object(O.jsxs)("div",{children:["score:",e.rating]}),Object(O.jsx)("img",{src:e.imageHref,alt:"review img"})]})})}))})})]})]}),Object(O.jsx)(Oe,{restaurantName:i.name,open:f,onClose:function(){g(!1)}}),Object(O.jsx)(ke,{order:q,dialogProps:{open:w,onClose:function(){S(!1)}}})]}):null},De=n(244),Ee=n(246),Ae=n(255),Re=function(e){var t=Object(a.useState)(e.restaurant),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(R.a)({initialValues:{name:c.name,description:c.description},onSubmit:function(){}});return Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsxs)(M.a,{children:[Object(O.jsxs)(p.a,{children:[Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(E.a,{label:"name",name:"name",value:i.values.name,onChange:i.handleChange}),Object(O.jsx)(E.a,{label:"description",name:"description",value:i.values.description,onChange:i.handleChange})]}),Object(O.jsx)(C.a,{variant:"h4",children:"Menu"}),Object(O.jsxs)(ve.a,{container:!0,spacing:3,children:[c.menu.map((function(e,t){return Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsxs)(M.a,{children:[Object(O.jsx)(E.a,{label:"Name",value:e.name,onChange:function(e){var n=Object(_.a)(c.menu);n[t].name=e.target.value,r((function(e){return Object(u.a)(Object(u.a)({},e),{},{menu:n})}))}}),Object(O.jsx)(E.a,{label:"Quantity",value:e.quantity,onChange:function(e){var n=Object(_.a)(c.menu);n[t].quantity=Number(e.target.value),r((function(e){return Object(u.a)(Object(u.a)({},e),{},{menu:n})}))}}),Object(O.jsx)(E.a,{label:"Price",value:e.price,onChange:function(e){var n=Object(_.a)(c.menu);n[t].price=Number(e.target.value),r((function(e){return Object(u.a)(Object(u.a)({},e),{},{menu:n})}))}}),Object(O.jsx)(A.a,{onClick:function(){var e=c.menu.filter((function(e,n){return n!==t}));r((function(t){return Object(u.a)(Object(u.a)({},t),{},{menu:e})}))},children:Object(O.jsx)(ge.a,{})})]})},t)})),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsxs)(A.a,{onClick:function(){r((function(e){return Object(u.a)(Object(u.a)({},e),{},{menu:[].concat(Object(_.a)(e.menu),[{name:"",quantity:0,price:0}])})}))},children:["add item ",Object(O.jsx)(De.a,{})]})})]})]}),Object(O.jsx)(A.a,{onClick:function(){var e=Object(u.a)({},c);delete e._id,delete e.ownerId,delete e.distance,delete e.__v,e.menu=e.menu.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{_id:void 0})})),te.a.put("/api/restaurant/".concat(c.name),Object(u.a)(Object(u.a)({},e),i.values),{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e),alert(e)}))},children:"Save changes"})]})})},Pe=function(e){var t=e.restaurant,n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],i=c[1],s=function(){te.a.get("/api/reservation",{params:{restaurantName:t.name},withCredentials:!0}).then((function(e){console.log(e),i(e.data)})).catch((function(e){console.log(e)}))};Object(a.useEffect)((function(){s()}),[]);return Object(O.jsx)("div",{children:r.length&&r.map((function(e,t){return Object(O.jsx)(M.a,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsxs)(C.a,{children:["restaurant: ",e.restaurantName]}),Object(O.jsxs)(C.a,{children:["phone: ",e.userPhone]}),Object(O.jsxs)(C.a,{children:["status: ",e.status]}),Object(O.jsxs)(C.a,{children:["date: ",e.reservationDate.toString().split("T")[0]]}),Object(O.jsxs)(C.a,{children:["time:"," ",e.reservationDate.toString().split("T")[1].split(".")[0]]}),Object(O.jsxs)(C.a,{children:["number of seats:",e.seatCount]}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)(A.a,{onClick:function(){var t;t=e,te.a.post("/api/reservation/".concat(t._id),{status:"DECLINED"},{withCredentials:!0}).then((function(e){s()}))},children:"Decline"}),Object(O.jsx)(A.a,{onClick:function(){var t;t=e,te.a.post("/api/reservation/".concat(t._id),{status:"ACCEPTED"},{withCredentials:!0}).then((function(e){s()}))},children:"Accept"})]})]})})}))||Object(O.jsx)(M.a,{children:Object(O.jsx)(C.a,{children:"You don't have any reservations maybe hire a marketing guy"})})})},Te=function(){var e=Object(a.useContext)(m),t=Object(d.a)(e,2),n=t[0],c=(t[1],Object(a.useState)([])),r=Object(d.a)(c,2),i=r[0],s=r[1],o=Object(a.useState)(null),l=Object(d.a)(o,2),j=l[0],b=l[1];Object(a.useEffect)((function(){te.a.get("/api/restaurant",{params:{ownerId:n.uid},withCredentials:!0}).then((function(e){if(200!==e.status)throw new Error(e.data);s(e.data),b(e.data[0])})).catch((function(e){alert(e)}))}),[]),Object(a.useEffect)((function(){console.log("selectedRestaurant=>",j)}),[j]);return Object(O.jsx)("div",{children:Object(O.jsx)(p.a,{children:Object(O.jsxs)(ve.a,{container:!0,spacing:3,children:[Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(C.a,{variant:"h4",children:"Select a restaurant"})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:j&&Object(O.jsx)(Ee.a,{fullWidth:!0,value:j.name,onChange:function(e){var t=e.target.value,n=i.find((function(e){return e.name===t}));console.log(n),n&&b(Object(u.a)({},n))},style:{marginTop:"1rem",marginBottom:"1rem"},children:i.map((function(e,t){return Object(O.jsx)(Ae.a,{value:e.name,children:e.name},t)}))})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(C.a,{variant:"h4",children:"Restaurant Details"})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:j&&Object(O.jsx)(Re,{restaurant:j})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsx)(C.a,{variant:"h4",children:"Reservatations"})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:j&&Object(O.jsx)(Pe,{restaurant:j})}),Object(O.jsx)(ve.a,{item:!0,xs:12,children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(C.a,{children:" add a restaurnat"}),Object(O.jsx)(De.a,{})]})})]})})})},qe=Object(s.a)({palette:{primary:{main:"#3e605c"},secondary:{main:"#ff8c0a"}}});var He=function(){return Object(O.jsx)(o.a,{theme:qe,children:Object(O.jsx)(l.a,{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/login",children:Object(O.jsx)(T,{})}),Object(O.jsxs)(j.b,{children:[Object(O.jsx)(H,{}),Object(O.jsx)(f,{exact:!0,path:"/",component:re}),Object(O.jsx)(f,{exact:!0,path:"/userReservations",component:ie}),Object(O.jsx)(f,{exact:!0,path:"/restaurant",component:Ie}),Object(O.jsx)(f,{exact:!0,path:"/reservations",component:ie}),Object(O.jsx)(f,{exact:!0,path:"/dashboard",component:Te})]})]})})})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,258)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(x,{children:Object(O.jsx)(He,{})})}),document.getElementById("root")),_e()}},[[189,1,2]]]);
//# sourceMappingURL=main.6213635d.chunk.js.map