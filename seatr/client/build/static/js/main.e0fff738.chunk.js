(this.webpackJsonpseatr=this.webpackJsonpseatr||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),s=n.n(r),i=(n(141),n(142),n(125)),o=n(246),l=n(48),u=n(23),j=n(12),d=n(9),b=n(5),m=n(248),h=n(3),O=c.a.createContext([{},function(){}]),x=function(e){var t=e.children,n=Object(m.a)(["user"]),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(r.user),o=Object(d.a)(i,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){s("user",l)}),[l]),Object(h.jsx)(O.Provider,{value:[l,u],children:t})};function f(e){var t=e.component,n=Object(b.a)(e,["component"]),c=Object(u.h)(),r=Object(a.useContext)(O),s=Object(d.a)(r,1)[0];return console.log("authentification details:",s),Object(h.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return s&&"undefined"!==s?s.email?Object(h.jsx)(t,Object(j.a)({},e)):Object(h.jsx)(u.a,{to:{pathname:"/info"}}):Object(h.jsx)(u.a,{to:{pathname:"/login",state:{prevPath:c.pathname}}})}}))}var p=n(226),v=n(230),g=n(231),N=n(232),w=n(191);function C(){return Object(h.jsx)("img",{className:"logo pointer",alt:"company logo",src:"logo.svg"})}function y(e){var t=e.setGoToLogin,n=function(){t(!0)};return Object(h.jsx)(p.a,{children:Object(h.jsxs)("div",{className:"center-children p-t-5",children:[Object(h.jsx)(C,{}),Object(h.jsx)(v.a,{className:"w-20 m-b-2 center-text",children:Object(h.jsx)(g.a,{onClick:n,children:Object(h.jsx)(N.a,{children:Object(h.jsx)(w.a,{children:"Sign in with phone number"})})})}),Object(h.jsx)(w.a,{className:"bold italic cursor-pointer",onClick:n,children:"New here? Create an account!"})]})})}var k={apiKey:"AIzaSyDb5mCjlEnbtmMSypfM0azSsOpJeE4qckM",authDomain:"seatr-2adb4.firebaseapp.com",projectId:"seatr-2adb4",storageBucket:"seatr-2adb4.appspot.com",messagingSenderId:"667303864305",appId:"1:667303864305:web:eef82e4d6abb54499e0650",measurementId:"G-BS6L38PJCX"},S=n(98),E=(n(158),n(32)),T=n(20),P=n.n(T);function R(){var e=Object(a.useContext)(O),t=Object(d.a)(e,2)[1];return Object(a.useEffect)((function(){E.a.apps.length?E.a.app():E.a.initializeApp(k);var e={callbacks:{signInSuccessWithAuthResult:function(e){var n=e.user;return P.a.get("/api/user/".concat(n.uid),{withCredentials:!0}).then((function(e){var n=e.data;t(Object(j.a)(Object(j.a)({},n),{},{isNewUser:!1}))})).catch((function(){t({phoneNumber:n.phoneNumber,uid:n.uid,isNewUser:!0})})),!1},uiShown:function(){document.querySelectorAll("#firebaseui-auth-container")[0].style.paddingTop="5rem",document.querySelectorAll(".firebaseui-card-header")[0].className="",document.querySelectorAll(".firebaseui-title")[0].style.textAlign="center",document.querySelectorAll(".firebaseui-container")[0].style.backgroundColor="transparent",document.querySelectorAll(".firebaseui-container")[0].classList.remove("mdl-shadow--2dp"),document.querySelectorAll(".firebaseui-card-footer")[0].style.display="none"}},signInOptions:[{provider:E.a.auth.PhoneAuthProvider.PROVIDER_ID,defaultCountry:"RO"}]};(S.a.AuthUI.getInstance()||new S.a.AuthUI(E.a.auth())).start("#firebaseui-auth-container",e)}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{id:"firebaseui-auth-container"})})}var A=n(250),_=n(235),q=n(62),I={name:!1,surname:!1,email:!1};function D(){var e=Object(a.useState)("Other"),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(O),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(I),u=Object(d.a)(l,2),b=u[0],m=u[1],x=function(e){var t=e.currentTarget.textContent;c(t)},f=function(e){return n===e?"list-element-selected":"list-element"},v=Object(q.a)({initialValues:{name:"",surname:"",email:""},onSubmit:function(e){var t=I,a=!1;if(""===e.name&&(t.name=!0,a=!0),""===e.surname&&(t.surname=!0,a=!0),""===e.email&&(t.email=!0,a=!0),m(t),!a){var c={phoneNumber:i.phoneNumber,uid:i.uid,name:e.name,surname:e.surname,gender:n,email:e.email};P.a.post("/api/user",Object(j.a)({},c),{withCredentials:!0}).then((function(){return o(Object(j.a)(Object(j.a)({},c),{},{isNewUser:!1}))}))}}});return Object(h.jsxs)(p.a,{className:"m-t-5",children:[Object(h.jsx)(w.a,{className:"center-text",variant:"h5",children:"Tell us about you.."}),Object(h.jsxs)("form",{onSubmit:v.handleSubmit,className:"flex-column center-children",children:[Object(h.jsx)("div",{className:"m-t-2 w-20",children:Object(h.jsx)(A.a,{name:"name",label:"name",variant:"outlined",onChange:v.handleChange,className:"w-100p",error:!0===b.name})}),Object(h.jsx)("div",{className:"m-t-1 w-20",children:Object(h.jsx)(A.a,{name:"surname",label:"surname",variant:"outlined",onChange:v.handleChange,className:"w-100p",error:!0===b.surname})}),Object(h.jsx)("div",{className:"m-t-1 w-20",children:Object(h.jsx)(A.a,{name:"email",label:"email",variant:"outlined",onChange:v.handleChange,className:"w-100p",error:!0===b.email})}),Object(h.jsxs)("div",{className:"flex gap-1 m-t-2",id:"category",children:[Object(h.jsx)("div",{className:f("Man"),id:"Man",onClick:x,children:Object(h.jsx)(w.a,{align:"center",children:"Man"})}),Object(h.jsx)("div",{className:f("Woman"),id:"Woman",onClick:x,children:Object(h.jsx)(w.a,{align:"center",children:"Woman"})}),Object(h.jsx)("div",{className:f("Other"),id:"Other",onClick:x,children:Object(h.jsx)(w.a,{align:"center",children:"Other"})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(_.a,{type:"submit",children:"Next"})]})]})}function M(){var e=Object(u.h)(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useContext)(O),i=Object(d.a)(s,1)[0];return c?i&&"undefined"!==i?i.isNewUser?Object(h.jsx)(D,{}):Object(h.jsx)(u.a,{to:{pathname:e.state?e.state.prevPath:"/"}}):Object(h.jsx)(R,{}):Object(h.jsx)(y,{setGoToLogin:r})}var W=n(236);var H=function(){return Object(h.jsx)(W.a,{position:"static",color:"primary",children:Object(h.jsxs)(l.b,{to:"/",children:[Object(h.jsx)("img",{className:"w-5 h-5 p-l-2 pointer",alt:"company logo",src:"logo_white.svg"})," "]})})},L=n(29),V=n(129),F=n(131),B=n(237),U=n(238);function Y(e){var t=e.logoHref;return Object(h.jsx)("div",{className:"restaurant-card__logo",children:Object(h.jsx)("img",{className:"w-5 h-5 cover round border-white pointer",alt:"company logo",src:t})})}function J(e){var t=e.backgroundHref;return Object(h.jsx)("img",{className:"w-100p h-5 cover",alt:"company background",src:t})}function z(e){var t=e.name,n=e.description;return Object(h.jsxs)("div",{className:"p-1 secondary white",children:[Object(h.jsx)("br",{}),Object(h.jsx)(w.a,{variant:"h6",children:t}),Object(h.jsxs)(w.a,{variant:"body2",children:[null===n||void 0===n?void 0:n.substring(0,200),"..."]})]})}var G=n(258),Z=n(118),K=n.n(Z),X=n(119),Q=n.n(X);function $(e){var t=e.priceRange,n=e.starRating,a=e.distance;return Object(h.jsxs)(V.a,{className:"restaurant-card__footer",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex center",children:[Object(h.jsx)(K.a,{}),Object(h.jsx)(w.a,{style:{fontWeight:600},children:"".concat(null!==a&&void 0!==a?a:"??"," min")})]}),Object(h.jsx)("div",{className:"flex center",children:Object(h.jsx)(G.a,{icon:Object(h.jsx)(Q.a,{}),name:"half-rating-read",max:3,defaultValue:t,precision:1,readOnly:!0})})]}),Object(h.jsx)("div",{className:"flex center",children:Object(h.jsx)(G.a,{name:"half-rating-read",max:5,defaultValue:n,precision:.5,readOnly:!0})})]})}var ee=function(e){var t=e.priceRange,n=e.name,a=e.description,c=e.logoHref,r=e.backgroundHref,s=e.menu,i=e.distance,o=e.rating,l=Object(u.g)(),j=function(){l.push({pathname:"/restaurant",search:"?name=".concat(n),state:{priceRange:t,name:n,description:a,logoHref:c,backgroundHref:r,menu:s,distance:i,rating:o}})};return Object(h.jsxs)("div",{className:"restaurant-card",children:[Object(h.jsx)("div",{onClick:j,children:Object(h.jsx)(Y,{logoHref:c})}),Object(h.jsx)("div",{onClick:j,className:"pointer",children:Object(h.jsx)(J,{backgroundHref:r})}),Object(h.jsxs)(V.a,{className:"flex-column pointer",onClick:j,children:[Object(h.jsx)(z,{name:n,description:a}),Object(h.jsx)($,{priceRange:t,starRating:o,distance:i})]})]})},te=n(251);function ne(e){var t=e.restaurants;return Object(h.jsx)("div",{className:"center-children",children:t.map((function(e){return Object(h.jsx)(ee,{name:e.name,description:e.description,backgroundHref:e.backgroundHref,logoHref:e.logoHref,menu:e.menu,distance:e.distance,priceRange:e.priceRange,rating:e.rating},Object(te.a)())}))})}var ae=n(126),ce=(n(178),n(120)),re=n.n(ce);n(179);var se=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),j=u[0],b=u[1],m=Object(a.useState)(!1),O=Object(d.a)(m,2),x=O[0],f=O[1],p=Object(a.useState)(!1),v=Object(d.a)(p,2),g=v[0],N=v[1];Object(a.useEffect)((function(){o(n)}),[n]),Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;P.a.get("/api/restaurant?lat=".concat(t.latitude,"&lng=").concat(t.longitude),{withCredentials:!0}).then((function(e){var t=e.data;console.log(t),c(t)})).catch((function(e){console.log(e)}))}))}),[]);var w=function(){var e=n.filter((function(e){return e.name.includes(j)||e.tags.some((function(e){return e.includes(j)}))}));g&&(e=e.filter((function(e){return e.currentAvailableSeats>.3*e.maxSeatCount}))),o(e)};return Object(a.useEffect)((function(){w()}),[]),Object(h.jsxs)("div",{className:"home-page",children:[Object(h.jsxs)(V.a,{className:"home-page_search",children:[Object(h.jsx)(F.a,{onChange:function(e){var t=e.target.value;b(t),w()},fullWidth:!0}),Object(h.jsx)("div",{className:"w-2",onClick:w,children:Object(h.jsx)(B.a,{})}),Object(h.jsx)("div",{className:"w-2",onClick:function(){return f((function(e){return!e}))},children:Object(h.jsx)(U.a,{})})]}),x&&Object(h.jsxs)(V.a,{className:"home-page_filter",children:[Object(h.jsx)(re.a,{options:["distance","rating","price"],value:"distance",onChange:function(e){var t=e.value,a=Object(L.a)(n);switch(t){case"distance":a.sort((function(e,t){return e.distance&&t.distance&&e.distance>t.distance?1:-1}));break;case"rating":a.sort((function(e,t){return e.rating<t.rating?1:-1}));break;case"price":a.sort((function(e,t){return e.priceRange>t.priceRange?1:-1}));break;default:throw new Error("invalid sort by value")}o(a)}}),Object(h.jsx)(ae.a,{color:"success",onChange:function(){N((function(e){return!e}))},children:"Covid"})]}),Object(h.jsx)(ne,{restaurants:i})]})},ie=n(22),oe=n.n(ie),le=n(35),ue=n(123),je=n.n(ue),de=n(122),be=n.n(de),me=n(252);function he(e){var t=Object(a.useContext)(O),n=Object(d.a)(t,1)[0],c=Object(q.a)({onSubmit:function(){var t=function(){var e=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Uint8Array,e.next=4,t.arrayBuffer();case 4:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.t4=[e.t3],e.t5={type:t.type},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=new FormData;t(c.values.file).then((function(t){a.append("description",c.values.description),a.append("rating",String(c.values.rating)),a.append("streamfile",t),a.append("personName",n.name),e.restaurantName&&a.append("restaurantName",e.restaurantName),P.a.post("/api/review",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).catch((function(e){console.log(e.message)}))})).catch((function(t){P.a.post("/api/review",{description:c.values.description,stars:c.values.rating,restaurantName:e.restaurantName,personName:n.name},{withCredentials:!0}).catch((function(e){console.log(e.message)}))})).finally((function(){return e.onClose()}))},initialValues:{description:"",rating:0,file:null}});return Object(h.jsx)(me.a,{open:e.open,onClose:e.onClose,children:Object(h.jsxs)(p.a,{children:[Object(h.jsx)(w.a,{variant:"h4",children:"Review"}),Object(h.jsxs)("form",{className:"flex-column",onSubmit:c.handleSubmit,children:[Object(h.jsx)(A.a,{name:"description",label:"description",className:"m-2",value:c.values.description,onChange:c.handleChange}),Object(h.jsxs)(_.a,{variant:"contained",component:"label",className:"m-2",children:["Upload Image",Object(h.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var t;(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.files[0])&&c.setFieldValue("file",e.currentTarget.files[0])},className:"form-control"})]}),Object(h.jsx)(G.a,{className:"m-2",name:"half-rating-read",max:5,defaultValue:0,precision:.5,onChange:function(e){c.setFieldValue("rating",e.target.value)}}),Object(h.jsx)(_.a,{type:"submit",className:"m-2",children:Object(h.jsx)(w.a,{children:"Submit"})})]})]})})}var Oe=n(239),xe=n(240),fe=function(e){var t=e.menuItem,n=e.setOrder;return Object(h.jsxs)("div",{className:"flex center",children:[Object(h.jsxs)(w.a,{className:"flex-1",children:[" ","".concat(t.item.name,": ").concat(t.item.price," RON / ").concat(t.item.quantity,"g")," "]}),Object(h.jsxs)("div",{className:"flex center",children:[Object(h.jsxs)(_.a,{onClick:function(){n((function(e){return e.map((function(e){var n=e.item,a=e.quantity;return n.name===t.item.name?{item:n,quantity:Math.max(0,a-1)}:{item:n,quantity:a}}))}))},children:[" ",Object(h.jsx)(Oe.a,{})," "]}),Object(h.jsxs)(w.a,{children:[" ",t.quantity," "]}),Object(h.jsxs)(_.a,{onClick:function(){n((function(e){return e.map((function(e){var n=e.item,a=e.quantity;return n.name===t.item.name?{item:n,quantity:a+1}:{item:n,quantity:a}}))}))},color:"secondary",children:[" ",Object(h.jsx)(xe.a,{})," "]})]})]})},pe=n(255),ve=n(242),ge=n(124),Ne=n.n(ge),we=n(253),Ce=n(241),ye=n(121),ke=n.n(ye),Se=function(e){var t=function(e){var t=0;return e.forEach((function(e){var n=e.item,a=e.quantity;t+=n.price*a})),t};return Object(h.jsxs)(me.a,Object(j.a)(Object(j.a)({},e.dialogProps),{},{children:[Object(h.jsxs)(Ce.a,{children:[" ",Object(h.jsx)("div",{className:"center-text",children:" Pay for your order "})," "]}),Object(h.jsxs)("div",{className:"center-children p-2 gap-1",children:[Object(h.jsx)(w.a,{children:"You have to pay ".concat(t(e.order)," RON")}),Object(h.jsx)(ke.a,{environment:"TEST",paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"example"}}}],merchantInfo:{merchantId:"12345678901234567890",merchantName:"Demo Merchant"},transactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:"".concat(t(e.order)),currencyCode:"RON",countryCode:"RO"}},onLoadPaymentData:function(t){console.log("load payment data",t),e.finishMakeReservation()}})]})]}))},Ee=function(e){var t=e.restaurantName,n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){t&&function(){var e=Object(le.a)(oe.a.mark((function e(){var n,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get("/api/review",{params:{restaurantName:t},withCredentials:!0});case 3:n=e.sent,a=n.data,s(a.reviews),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(h.jsx)("div",{className:"flex-column gap-1 w-100p",children:r.map((function(e){return Object(h.jsxs)(v.a,{className:"p-1",children:[Object(h.jsxs)("div",{className:"flex-align-items",children:[Object(h.jsx)("div",{className:"flex-1",children:e.personName}),Object(h.jsx)("div",{children:Object(h.jsx)(G.a,{name:"half-rating-read",max:5,defaultValue:e.stars,precision:.5,readOnly:!0})})]}),Object(h.jsx)("hr",{}),e.description&&Object(h.jsx)("q",{children:e.description}),e.imageHref&&Object(h.jsx)("img",{src:e.imageHref,alt:"review img"})]},Object(te.a)())}))})};var Te=function(){var e=Object(u.h)(),t=Object(u.g)(),n=Object(a.useContext)(O),c=Object(d.a)(n,1)[0],r=Object(a.useState)(),s=Object(d.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(1),j=Object(d.a)(l,2),b=j[0],m=j[1],x=Object(a.useState)(!1),f=Object(d.a)(x,2),p=f[0],v=f[1],g=Object(a.useState)(!1),N=Object(d.a)(g,2),C=N[0],y=N[1],S=Object(a.useState)([]),T=Object(d.a)(S,2),R=T[0],q=T[1],I=Object(a.useState)("2017-05-24T10:30"),D=Object(d.a)(I,2),M=D[0],W=D[1],H=Object(a.useState)(""),L=Object(d.a)(H,2),F=L[0],B=L[1];Object(a.useEffect)((function(){if(e.state){var t=e.state;o(t),q(t.menu.map((function(e){return{item:e,quantity:0}})))}else{var n=e.search.split("=")[1];Object(le.a)(oe.a.mark((function e(){var t,a,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/restaurant/".concat(n));case 2:t=e.sent,a=t.data,c=a.restaurant,o(c),q(c.menu.map((function(e){return{item:e,quantity:0}})));case 7:case"end":return e.stop()}}),e)})))()}}),[e]),Object(a.useEffect)((function(){Object(le.a)(oe.a.mark((function e(){var t,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E.a.apps.length?E.a.app():E.a.initializeApp(k),t=E.a.messaging(),e.next=5,t.requestPermission();case 5:return e.next=7,t.getToken({vapidKey:"BHJ1aMQSkNa7KLvY62Y-lMrIWTZ4hXS3q4czNsuXuF2S4dg2W46cZPCSv1s1NZx6giJbxoIR_nvN_stroTVy0TM"});case 7:if(!(n=e.sent)){e.next=12;break}console.log("current notification token => ",n),e.next=14;break;case 12:return console.log("No registration token available. Request permission to generate one."),e.abrupt("return");case 14:B(n),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),alert(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()}),[]);var U=function(){var e=Object(le.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post("/api/restaurant/".concat(i.name,"/reservation"),{reservationDate:M,seatCount:b,userPhone:c.phoneNumber,userGender:c.gender,userName:"".concat(c.surname," ").concat(c.name),order:R.filter((function(e){return e.quantity>0})).map((function(e){return"".concat(e.item.name," x ").concat(e.quantity)})).join(", "),fcmToken:F},{withCredentials:!0}).then((function(){return t.push("/reservation")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(JSON.stringify(e.t0.response.data));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return i?Object(h.jsxs)("div",{className:"restaurant-home",children:[Object(h.jsx)("img",{alt:"company background",src:i.backgroundHref,className:"restaurant-home__background"}),Object(h.jsx)("div",{className:"restaurant-home__logo-parent",children:Object(h.jsx)("img",{alt:"company logo",src:i.logoHref,className:"restaurant-home__logo"})}),Object(h.jsxs)(V.a,{className:"restaurant-home__title",children:[Object(h.jsxs)("h1",{children:[" ",i.name," "]}),i.description]}),R.length>0&&Object(h.jsxs)(V.a,{className:"restaurant-home__menu-items",children:["Preorder the food",Object(h.jsx)("div",{children:R.map((function(e){return Object(h.jsx)(fe,{menuItem:e,setOrder:q},Object(te.a)())}))})]}),Object(h.jsxs)(V.a,{className:"restaurant-home__appointment-inputs",children:[Object(h.jsx)("div",{children:"When?"}),Object(h.jsx)("div",{children:"How many people?  "}),Object(h.jsx)(A.a,{id:"date",label:"Date",type:"datetime-local",value:M,onChange:function(e){return W(e.target.value)}}),Object(h.jsxs)("div",{children:[Object(h.jsxs)(_.a,{onClick:function(){return m((function(e){return Math.max(0,e-1)}))},children:[" ",Object(h.jsx)(be.a,{})," "]}),b,Object(h.jsxs)(_.a,{onClick:function(){return m((function(e){return e+1}))},children:[" ",Object(h.jsx)(je.a,{color:"secondary"})," "]})]})]}),Object(h.jsxs)("div",{className:"restaurant-home__end-buttons",children:[Object(h.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){0!==b?R.some((function(e){return e.quantity>0}))?y(!0):U():alert("Choose seat count!")},children:" Make a reservation "}),Object(h.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return v(!0)},children:" Add review  "})]}),Object(h.jsxs)(we.a,{children:[Object(h.jsx)(pe.a,{expandIcon:Object(h.jsx)(Ne.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(h.jsx)(w.a,{variant:"h5",children:"Reviews"})}),Object(h.jsx)(ve.a,{children:Object(h.jsx)(Ee,{restaurantName:i.name})})]}),Object(h.jsx)(he,{restaurantName:i.name,open:p,onClose:function(){return v(!1)}}),Object(h.jsx)(Se,{order:R,finishMakeReservation:U,dialogProps:{open:C,onClose:function(){y(!1)}}})]}):null},Pe=n(243),Re=n(244),Ae=n(247),_e=n(256),qe=function(e){var t=Object(a.useState)(e.restaurant),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(q.a)({initialValues:{name:c.name,description:c.description},onSubmit:function(){}});return Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsx)(V.a,{className:"p-1",children:Object(h.jsxs)(p.a,{children:[Object(h.jsx)(w.a,{variant:"h4",children:"Tile & Description"}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1rem",padding:"1rem"},children:[Object(h.jsx)(A.a,{label:"name",name:"name",value:s.values.name,onChange:s.handleChange}),Object(h.jsx)(A.a,{label:"description",name:"description",value:s.values.description,onChange:s.handleChange})]}),Object(h.jsx)(w.a,{variant:"h4",children:"Menu"}),Object(h.jsxs)(Pe.a,{container:!0,spacing:3,className:"p-1",children:[c.menu.map((function(e,t){return Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsxs)(V.a,{className:"p-1",children:[Object(h.jsx)(A.a,{label:"Name",value:e.name,onChange:function(e){var n=Object(L.a)(c.menu);n[t].name=e.target.value,r((function(e){return Object(j.a)(Object(j.a)({},e),{},{menu:n})}))}}),Object(h.jsx)(A.a,{label:"Quantity",value:e.quantity,onChange:function(e){var n=Object(L.a)(c.menu);n[t].quantity=Number(e.target.value),r((function(e){return Object(j.a)(Object(j.a)({},e),{},{menu:n})}))}}),Object(h.jsx)(A.a,{label:"Price",value:e.price,onChange:function(e){var n=Object(L.a)(c.menu);n[t].price=Number(e.target.value),r((function(e){return Object(j.a)(Object(j.a)({},e),{},{menu:n})}))}}),Object(h.jsx)(_.a,{onClick:function(){var e=c.menu.filter((function(e,n){return n!==t}));r((function(t){return Object(j.a)(Object(j.a)({},t),{},{menu:e})}))},children:Object(h.jsx)(Oe.a,{})})]})},t)})),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsxs)(_.a,{onClick:function(){r((function(e){return Object(j.a)(Object(j.a)({},e),{},{menu:[].concat(Object(L.a)(e.menu),[{name:"",quantity:0,price:0}])})}))},children:["add item ",Object(h.jsx)(Re.a,{})]})}),Object(h.jsx)(_.a,{onClick:function(){var e=Object(j.a)({},c);delete e._id,delete e.ownerId,delete e.distance,delete e.__v,e.menu=e.menu.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{_id:void 0})}));e.starCount,e.starSum,e.rating;var t=Object(b.a)(e,["starCount","starSum","rating"]);console.log(t),P.a.put("/api/restaurant/".concat(c.name),Object(j.a)(Object(j.a)({},t),s.values),{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e),alert(e)}))},children:"Save changes"})]})]})})})},Ie=function(e){var t=e.restaurant,n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1],i=function(){var e=Object(le.a)(oe.a.mark((function e(){var n,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,P.a.get("/api/reservation",{params:{restaurantName:t.name},withCredentials:!0});case 4:return n=e.sent,a=n.data,console.log("reservations => ",a.reverse()),s(a),e.next=10,new Promise((function(e){return setTimeout(e,1e3)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:e.next=0;break;case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){i()}),[]);return Object(h.jsx)("div",{className:"flex wrap",children:r.length&&r.map((function(e,t){return Object(h.jsxs)(V.a,{className:"p-1 m-1 flex-column",style:{width:"20rem"},children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"restaurant:"})," ",e.restaurantName]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"date:"})," ",e.reservationDate.toString().split("T")[0]]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"time:"})," ",e.reservationDate.toString().split("T")[1].split(".")[0]]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"number of seats:"})," ",e.seatCount]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"name:"})," ",e.userName]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"gender:"})," ",e.userGender]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"phone:"})," ",e.userPhone]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"orders:"})," ",e.order&&""!==e.order?e.order:"no orders"]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"status:"})," ",e.status]}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)(_.a,{onClick:function(){return t=e,void P.a.post("/api/reservation/".concat(t._id),{status:"DECLINED"},{withCredentials:!0});var t},children:" Decline "}),Object(h.jsx)(_.a,{onClick:function(){return t=e,void P.a.post("/api/reservation/".concat(t._id),{status:"ACCEPTED"},{withCredentials:!0});var t},children:" Accept "})]})]})}))||Object(h.jsx)(V.a,{children:Object(h.jsx)(w.a,{children:"You don't have any reservations maybe hire a marketing guy"})})})},De=function(){var e=Object(a.useContext)(O),t=Object(d.a)(e,1)[0],n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),o=Object(d.a)(i,2),l=o[0],u=o[1];Object(a.useEffect)((function(){P.a.get("/api/restaurant",{params:{ownerId:t.uid},withCredentials:!0}).then((function(e){if(200!==e.status)throw new Error(e.data);console.log(e.data,t.uid),s(e.data),u(e.data[0])})).catch((function(e){alert(e)}))}),[]),Object(a.useEffect)((function(){console.log("selectedRestaurant=>",l)}),[l]);return Object(h.jsx)("div",{className:"m-t-1",children:Object(h.jsx)(p.a,{children:Object(h.jsxs)(Pe.a,{container:!0,spacing:3,children:[Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsx)(w.a,{variant:"h4",children:"Select a restaurant"})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsx)(V.a,{className:"p-1",children:l&&Object(h.jsx)(Ae.a,{fullWidth:!0,value:l.name,onChange:function(e){var t=e.target.value,n=r.find((function(e){return e.name===t}));console.log(n),n&&u(Object(j.a)({},n))},style:{marginTop:"1rem",marginBottom:"1rem"},children:r.map((function(e,t){return Object(h.jsx)(_e.a,{value:e.name,children:e.name},t)}))})})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsx)(w.a,{variant:"h4",children:"Restaurant Details"})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:l&&Object(h.jsx)(qe,{restaurant:l})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsx)(w.a,{variant:"h4",children:"Reservatations"})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:l&&Object(h.jsx)(Ie,{restaurant:l})}),Object(h.jsx)(Pe.a,{item:!0,xs:12,children:Object(h.jsxs)(_.a,{children:[Object(h.jsx)(w.a,{children:" add a restaurant"}),Object(h.jsx)(Re.a,{})]})})]})})})},Me=n(245),We=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(O),s=Object(d.a)(r,1)[0],i=Object(a.useState)(),o=Object(d.a)(i,2),l=o[0],u=o[1],j=function(){var e=Object(le.a)(oe.a.mark((function e(){var t,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,P.a.get("/api/reservation",{params:{userPhone:s.phone},withCredentials:!0});case 4:return t=e.sent,n=t.data,c(n.reverse()),e.next=9,new Promise((function(e){return setTimeout(e,1e3)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:e.next=0;break;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){j()}),[]),Object(a.useEffect)((function(){E.a.apps.length?E.a.app():E.a.initializeApp(k),u(E.a.messaging())}),[]),Object(a.useEffect)((function(){l&&Object(le.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.requestPermission();case 3:return e.next=5,l.getToken({vapidKey:"BHJ1aMQSkNa7KLvY62Y-lMrIWTZ4hXS3q4czNsuXuF2S4dg2W46cZPCSv1s1NZx6giJbxoIR_nvN_stroTVy0TM"});case 5:return(t=e.sent)?console.log("current notification token => ",t):console.log("No registration token available. Request permission to generate one."),e.next=9,l.onMessage((function(e){console.log("Message received. ",e)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[l]);var b=function(e){switch(e){case"ACCEPTED":return Object(h.jsx)("b",{style:{color:"green"},children:" ACCEPTED "});case"DECLINED":return Object(h.jsx)("b",{style:{color:"RED"},children:" DECLINED "});default:return Object(h.jsx)(Me.a,{})}};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"center-text",children:"Reservations"}),Object(h.jsx)("div",{className:"flex-column wrap center",children:n.length&&n.map((function(e,t){return Object(h.jsxs)(V.a,{className:"p-1 m-1 flex-column",style:{width:"20rem"},children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"restaurant:"})," ",e.restaurantName]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"date:"})," ",e.reservationDate.toString().split("T")[0]]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"time:"})," ",e.reservationDate.toString().split("T")[1].split(".")[0]]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"number of seats:"})," ",e.seatCount]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"name:"})," ",e.userName]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"gender:"})," ",e.userGender]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"phone:"})," ",e.userPhone]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"orders:"})," ",e.order&&""!==e.order?e.order:"no orders"]}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"center-children flex-1",children:b(e.status)})]})}))||Object(h.jsx)(V.a,{children:Object(h.jsx)(w.a,{children:"You don't have any reservations maybe hire a marketing guy"})})})]})},He=Object(i.a)({palette:{primary:{main:"#3e605c"},secondary:{main:"#ff8c0a"}}});var Le=function(){return Object(h.jsx)(o.a,{theme:He,children:Object(h.jsx)(l.a,{children:Object(h.jsxs)(u.d,{children:[Object(h.jsxs)(u.b,{exact:!0,path:"/login",children:[" ",Object(h.jsx)(M,{})," "]}),Object(h.jsxs)(u.b,{exact:!0,path:"/info",children:[" ",Object(h.jsx)(D,{})," "]}),Object(h.jsxs)(u.b,{children:[Object(h.jsx)(H,{}),Object(h.jsx)(f,{exact:!0,path:"/",component:se}),Object(h.jsx)(f,{exact:!0,path:"/restaurant",component:Te}),Object(h.jsx)(f,{exact:!0,path:"/dashboard",component:De}),Object(h.jsx)(f,{exact:!0,path:"/reservation",component:We})]})]})})})},Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,259)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(x,{children:Object(h.jsx)(Le,{})})}),document.getElementById("root")),Be(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ve?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Fe(t,e)}))}}()}},[[190,1,2]]]);
//# sourceMappingURL=main.e0fff738.chunk.js.map